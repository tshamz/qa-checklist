!function(t,n,o){var e=function(){0===n(".accordion-control:checked").length?n(".accordion-control").prop("checked",!0):n(".accordion-control").prop("checked",!1),a()},a=function(){console.log(n(".accordion-control:checked").length),0===n(".accordion-control:checked").length?n(".toggle-all").text("hide all"):n(".toggle-all").text("expand all")},i=function(){n(".toggle-all").on("click",e),n(".accordion-control").on("change",a)};t.init=function(){i()}}(window.Accordion=window.Accordion||{},jQuery),function(t,n,o){function e(){gapi.client.load("analytics","v3").then(function(){n(".account-property-profile-container").show(),n(".visualization-table-container").show(),gapi.client.analytics.management.accounts.list().then(a)})}function a(t){t.result.items&&t.result.items.length&&t.result.items.forEach(function(t){n(".google-analytics-accounts").append(n("<option />",{text:t.name,value:t.id}))})}function i(t){gapi.client.analytics.management.webproperties.list({accountId:t}).then(l).then(null,function(t){})}function l(t){t.result.items&&t.result.items.length&&(n(".google-analytics-properties").html(n("<option disabled selected/>")),t.result.items.forEach(function(t){n(".google-analytics-properties").append(n("<option />",{text:t.name,value:t.id}))}))}function c(t,n){gapi.client.analytics.management.profiles.list({accountId:t,webPropertyId:n}).then(s).then(null,function(t){})}function s(t){t.result.items&&t.result.items.length&&(n(".google-analytics-profiles").html(n("<option disabled selected/>")),t.result.items.forEach(function(t){n(".google-analytics-profiles").append(n("<option />",{text:t.name,value:t.id}))}))}function r(t){gapi.client.analytics.data.ga.get({ids:"ga:"+t,"start-date":"30daysAgo","end-date":"yesterday",metrics:"ga:sessions",dimensions:"ga:browser,ga:operatingSystem,ga:browserVersion",sort:"-ga:sessions","max-results":"14"}).then(function(t){var o=t.result.totalsForAllResults["ga:sessions"];n(".google-visualization-table-table tbody").html(""),t.result.rows.forEach(function(t,e){var a=e%2===1?n("<tr />",{"class":"odd"}):n("<tr />",{"class":"even"});t.forEach(function(t,e){3===e&&(t=(t/o*100).toFixed(2)+"%"),a.append(n("<td />",{text:t,"class":"gapi-analytics-data-chart-styles-table-td"}))}),n(".google-visualization-table-table tbody").append(a)})}).then(null,function(t){})}var g="942831038384-pdnrhqopphvmlkfarsdj88k34dphd18i.apps.googleusercontent.com",u=["https://www.googleapis.com/auth/analytics.readonly"];window.authorize=function(t){var o=t?!1:!0,a={client_id:g,scope:u,immediate:o};gapi.auth.authorize(a,function(t){var o=n(".google-analytics-authorize");t.error?o.show():(o.hide(),e())})};var d=function(){n(".google-analytics-authorize").on("click",function(t){t.preventDefault(),window.authorize(t)}),n(".google-analytics-accounts").on("change",function(){i(n(this).val())}),n(".google-analytics-properties").on("change",function(){var t=n(".google-analytics-accounts").val(),o=n(".google-analytics-properties").val();c(t,o)}),n(".google-analytics-profiles").on("change",function(){var t=n(".google-analytics-profiles").val();r(t)})};t.init=function(){d()}}(window.AnalyticsIntegration=window.AnalyticsIntegration||{},jQuery),function(){Accordion.init(),AnalyticsIntegration.init()}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFjY29yZGlvbi5qcyIsIkFuYWx5dGljc0ludGVncmF0aW9uLmpzIiwiaW5pdC5qcyJdLCJuYW1lcyI6WyJBY2NvcmRpb24iLCIkIiwidW5kZWZpbmVkIiwiaGlkZVNob3ciLCJsZW5ndGgiLCJwcm9wIiwidXBkYXRlSGlkZVNob3dUZXh0IiwiY29uc29sZSIsImxvZyIsInRleHQiLCJiaW5kVUlBY3Rpb25zIiwib24iLCJpbml0Iiwid2luZG93IiwialF1ZXJ5IiwiQW5hbHl0aWNzSW50ZWdyYXRpb24iLCJxdWVyeUFjY291bnRzIiwiZ2FwaSIsImNsaWVudCIsImxvYWQiLCJ0aGVuIiwic2hvdyIsImFuYWx5dGljcyIsIm1hbmFnZW1lbnQiLCJhY2NvdW50cyIsImxpc3QiLCJoYW5kbGVBY2NvdW50cyIsInJlc3BvbnNlIiwicmVzdWx0IiwiaXRlbXMiLCJmb3JFYWNoIiwiYWNjb3VudCIsImFwcGVuZCIsIm5hbWUiLCJ2YWx1ZSIsImlkIiwicXVlcnlQcm9wZXJ0aWVzIiwiYWNjb3VudElkIiwid2VicHJvcGVydGllcyIsImhhbmRsZVByb3BlcnRpZXMiLCJlcnIiLCJodG1sIiwicXVlcnlQcm9maWxlcyIsInByb3BlcnR5SWQiLCJwcm9maWxlcyIsIndlYlByb3BlcnR5SWQiLCJoYW5kbGVQcm9maWxlcyIsInF1ZXJ5Q29yZVJlcG9ydGluZ0FwaSIsInByb2ZpbGVJZCIsImRhdGEiLCJnYSIsImdldCIsImlkcyIsInN0YXJ0LWRhdGUiLCJlbmQtZGF0ZSIsIm1ldHJpY3MiLCJkaW1lbnNpb25zIiwic29ydCIsIm1heC1yZXN1bHRzIiwidG90YWxTZXNzaW9ucyIsInRvdGFsc0ZvckFsbFJlc3VsdHMiLCJyb3dzIiwicm93IiwiaW5kZXgiLCIkdHIiLCJjbGFzcyIsInRvRml4ZWQiLCJDTElFTlRfSUQiLCJTQ09QRVMiLCJhdXRob3JpemUiLCJldmVudCIsInVzZUltbWRpYXRlIiwiYXV0aERhdGEiLCJjbGllbnRfaWQiLCJzY29wZSIsImltbWVkaWF0ZSIsImF1dGgiLCIkYXV0aG9yaXplQnV0dG9uIiwiZXJyb3IiLCJoaWRlIiwicHJldmVudERlZmF1bHQiLCJ0aGlzIiwidmFsIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxFQUFBQyxHQUVBLEdBQUFDLEdBQUEsV0FDQSxJQUFBRixFQUFBLDhCQUFBRyxPQUNBSCxFQUFBLHNCQUFBSSxLQUFBLFdBQUEsR0FFQUosRUFBQSxzQkFBQUksS0FBQSxXQUFBLEdBRUFDLEtBR0FBLEVBQUEsV0FDQUMsUUFBQUMsSUFBQVAsRUFBQSw4QkFBQUcsUUFDQSxJQUFBSCxFQUFBLDhCQUFBRyxPQUNBSCxFQUFBLGVBQUFRLEtBQUEsWUFFQVIsRUFBQSxlQUFBUSxLQUFBLGVBSUFDLEVBQUEsV0FDQVQsRUFBQSxlQUFBVSxHQUFBLFFBQUFSLEdBQ0FGLEVBQUEsc0JBQUFVLEdBQUEsU0FBQUwsR0FHQU4sR0FBQVksS0FBQSxXQUNBRixNQUdBRyxPQUFBYixVQUFBYSxPQUFBYixjQUFBYyxRQzdCQSxTQUFBQyxFQUFBZCxFQUFBQyxHQTJCQSxRQUFBYyxLQUNBQyxLQUFBQyxPQUFBQyxLQUFBLFlBQUEsTUFBQUMsS0FBQSxXQUNBbkIsRUFBQSx1Q0FBQW9CLE9BQ0FwQixFQUFBLGtDQUFBb0IsT0FDQUosS0FBQUMsT0FBQUksVUFBQUMsV0FBQUMsU0FBQUMsT0FBQUwsS0FBQU0sS0FJQSxRQUFBQSxHQUFBQyxHQUNBQSxFQUFBQyxPQUFBQyxPQUFBRixFQUFBQyxPQUFBQyxNQUFBekIsUUFDQXVCLEVBQUFDLE9BQUFDLE1BQUFDLFFBQUEsU0FBQUMsR0FDQTlCLEVBQUEsOEJBQUErQixPQUFBL0IsRUFBQSxjQUFBUSxLQUFBc0IsRUFBQUUsS0FBQUMsTUFBQUgsRUFBQUksUUFPQSxRQUFBQyxHQUFBQyxHQUNBcEIsS0FBQUMsT0FBQUksVUFBQUMsV0FBQWUsY0FBQWIsTUFDQVksVUFBQUEsSUFDQWpCLEtBQUFtQixHQUNBbkIsS0FBQSxLQUFBLFNBQUFvQixNQUtBLFFBQUFELEdBQUFaLEdBQ0FBLEVBQUFDLE9BQUFDLE9BQUFGLEVBQUFDLE9BQUFDLE1BQUF6QixTQUNBSCxFQUFBLGdDQUFBd0MsS0FBQXhDLEVBQUEsZ0NBQ0EwQixFQUFBQyxPQUFBQyxNQUFBQyxRQUFBLFNBQUFDLEdBQ0E5QixFQUFBLGdDQUFBK0IsT0FBQS9CLEVBQUEsY0FBQVEsS0FBQXNCLEVBQUFFLEtBQUFDLE1BQUFILEVBQUFJLFNBT0EsUUFBQU8sR0FBQUwsRUFBQU0sR0FDQTFCLEtBQUFDLE9BQUFJLFVBQUFDLFdBQUFxQixTQUFBbkIsTUFDQVksVUFBQUEsRUFDQVEsY0FBQUYsSUFFQXZCLEtBQUEwQixHQUNBMUIsS0FBQSxLQUFBLFNBQUFvQixNQUtBLFFBQUFNLEdBQUFuQixHQUNBQSxFQUFBQyxPQUFBQyxPQUFBRixFQUFBQyxPQUFBQyxNQUFBekIsU0FDQUgsRUFBQSw4QkFBQXdDLEtBQUF4QyxFQUFBLGdDQUNBMEIsRUFBQUMsT0FBQUMsTUFBQUMsUUFBQSxTQUFBQyxHQUNBOUIsRUFBQSw4QkFBQStCLE9BQUEvQixFQUFBLGNBQUFRLEtBQUFzQixFQUFBRSxLQUFBQyxNQUFBSCxFQUFBSSxTQU9BLFFBQUFZLEdBQUFDLEdBQ0EvQixLQUFBQyxPQUFBSSxVQUFBMkIsS0FBQUMsR0FBQUMsS0FDQUMsSUFBQSxNQUFBSixFQUNBSyxhQUFBLFlBQ0FDLFdBQUEsWUFDQUMsUUFBQSxjQUNBQyxXQUFBLGtEQUNBQyxLQUFBLGVBQ0FDLGNBQUEsT0FFQXRDLEtBQUEsU0FBQU8sR0FDQSxHQUFBZ0MsR0FBQWhDLEVBQUFDLE9BQUFnQyxvQkFBQSxjQUNBM0QsR0FBQSwyQ0FBQXdDLEtBQUEsSUFDQWQsRUFBQUMsT0FBQWlDLEtBQUEvQixRQUFBLFNBQUFnQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUEsSUFBQSxFQUFBOUQsRUFBQSxVQUFBZ0UsUUFBQSxRQUFBaEUsRUFBQSxVQUFBZ0UsUUFBQSxRQUNBSCxHQUFBaEMsUUFBQSxTQUFBSSxFQUFBNkIsR0FDQSxJQUFBQSxJQUNBN0IsR0FBQUEsRUFBQXlCLEVBQUEsS0FBQU8sUUFBQSxHQUFBLEtBRUFGLEVBQUFoQyxPQUFBL0IsRUFBQSxVQUFBUSxLQUFBeUIsRUFBQStCLFFBQUEsaURBRUFoRSxFQUFBLDJDQUFBK0IsT0FBQWdDLE9BR0E1QyxLQUFBLEtBQUEsU0FBQW9CLE1BN0dBLEdBQUEyQixHQUFBLDJFQUVBQyxHQUFBLHFEQUlBdkQsUUFBQXdELFVBQUEsU0FBQUMsR0FFQSxHQUFBQyxHQUFBRCxHQUFBLEdBQUEsRUFDQUUsR0FDQUMsVUFBQU4sRUFDQU8sTUFBQU4sRUFDQU8sVUFBQUosRUFFQXRELE1BQUEyRCxLQUFBUCxVQUFBRyxFQUFBLFNBQUE3QyxHQUNBLEdBQUFrRCxHQUFBNUUsRUFBQSw4QkFDQTBCLEdBQUFtRCxNQUNBRCxFQUFBeEQsUUFFQXdELEVBQUFFLE9BQ0EvRCxPQStGQSxJQUFBTixHQUFBLFdBQ0FULEVBQUEsK0JBQUFVLEdBQUEsUUFBQSxTQUFBMkQsR0FDQUEsRUFBQVUsaUJBQ0FuRSxPQUFBd0QsVUFBQUMsS0FFQXJFLEVBQUEsOEJBQUFVLEdBQUEsU0FBQSxXQUNBeUIsRUFBQW5DLEVBQUFnRixNQUFBQyxTQUVBakYsRUFBQSxnQ0FBQVUsR0FBQSxTQUFBLFdBQ0EsR0FBQTBCLEdBQUFwQyxFQUFBLDhCQUFBaUYsTUFDQXZDLEVBQUExQyxFQUFBLGdDQUFBaUYsS0FDQXhDLEdBQUFMLEVBQUFNLEtBRUExQyxFQUFBLDhCQUFBVSxHQUFBLFNBQUEsV0FDQSxHQUFBcUMsR0FBQS9DLEVBQUEsOEJBQUFpRixLQUNBbkMsR0FBQUMsS0FJQWpDLEdBQUFILEtBQUEsV0FDQUYsTUFHQUcsT0FBQUUscUJBQUFGLE9BQUFFLHlCQUFBRCxRQzVJQSxXQUVBZCxVQUFBWSxPQUNBRyxxQkFBQUgiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihBY2NvcmRpb24sICQsIHVuZGVmaW5lZCl7XG5cbiAgdmFyIGhpZGVTaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCQoJy5hY2NvcmRpb24tY29udHJvbDpjaGVja2VkJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAkKCcuYWNjb3JkaW9uLWNvbnRyb2wnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5hY2NvcmRpb24tY29udHJvbCcpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgfVxuICAgIHVwZGF0ZUhpZGVTaG93VGV4dCgpO1xuICB9O1xuXG4gIHZhciB1cGRhdGVIaWRlU2hvd1RleHQgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygkKCcuYWNjb3JkaW9uLWNvbnRyb2w6Y2hlY2tlZCcpLmxlbmd0aCk7XG4gICAgaWYgKCQoJy5hY2NvcmRpb24tY29udHJvbDpjaGVja2VkJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAkKCcudG9nZ2xlLWFsbCcpLnRleHQoJ2hpZGUgYWxsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy50b2dnbGUtYWxsJykudGV4dCgnZXhwYW5kIGFsbCcpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgYmluZFVJQWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy50b2dnbGUtYWxsJykub24oJ2NsaWNrJywgaGlkZVNob3cpO1xuICAgICQoJy5hY2NvcmRpb24tY29udHJvbCcpLm9uKCdjaGFuZ2UnLCB1cGRhdGVIaWRlU2hvd1RleHQpO1xuICB9O1xuXG4gIEFjY29yZGlvbi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgYmluZFVJQWN0aW9ucygpO1xuICB9O1xuXG59KHdpbmRvdy5BY2NvcmRpb24gPSB3aW5kb3cuQWNjb3JkaW9uIHx8IHt9LCBqUXVlcnkpKTtcbiIsIihmdW5jdGlvbihBbmFseXRpY3NJbnRlZ3JhdGlvbiwgJCwgdW5kZWZpbmVkKXtcblxuICB2YXIgQ0xJRU5UX0lEID0gJzk0MjgzMTAzODM4NC1wZG5yaHFvcHBodm1sa2ZhcnNkajg4azM0ZHBoZDE4aS5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSc7XG4gIHZhciBBUElfS0VZID0gJ0FJemFTeUItQ1hTODhlYmthVWdldjZLaGhtVHhoc1dYcG9hS3FORSc7XG4gIHZhciBTQ09QRVMgPSBbJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvYW5hbHl0aWNzLnJlYWRvbmx5J107XG5cbiAgdmFyIG91dHB1dCA9IFtdO1xuXG4gIHdpbmRvdy5hdXRob3JpemUgPSBmdW5jdGlvbihldmVudCkge1xuICAgIC8vIGBpbW1lZGlhdGVgIHNob3VsZCBiZSBmYWxzZSB3aGVuIGludm9rZWQgZnJvbSB0aGUgYnV0dG9uIGNsaWNrLlxuICAgIHZhciB1c2VJbW1kaWF0ZSA9IGV2ZW50ID8gZmFsc2UgOiB0cnVlO1xuICAgIHZhciBhdXRoRGF0YSA9IHtcbiAgICAgIGNsaWVudF9pZDogQ0xJRU5UX0lELFxuICAgICAgc2NvcGU6IFNDT1BFUyxcbiAgICAgIGltbWVkaWF0ZTogdXNlSW1tZGlhdGVcbiAgICB9O1xuICAgIGdhcGkuYXV0aC5hdXRob3JpemUoYXV0aERhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICB2YXIgJGF1dGhvcml6ZUJ1dHRvbiA9ICQoJy5nb29nbGUtYW5hbHl0aWNzLWF1dGhvcml6ZScpO1xuICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICRhdXRob3JpemVCdXR0b24uc2hvdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGF1dGhvcml6ZUJ1dHRvbi5oaWRlKCk7XG4gICAgICAgIHF1ZXJ5QWNjb3VudHMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBxdWVyeUFjY291bnRzKCkge1xuICAgIGdhcGkuY2xpZW50LmxvYWQoJ2FuYWx5dGljcycsICd2MycpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAkKCcuYWNjb3VudC1wcm9wZXJ0eS1wcm9maWxlLWNvbnRhaW5lcicpLnNob3coKTtcbiAgICAgICQoJy52aXN1YWxpemF0aW9uLXRhYmxlLWNvbnRhaW5lcicpLnNob3coKTtcbiAgICAgIGdhcGkuY2xpZW50LmFuYWx5dGljcy5tYW5hZ2VtZW50LmFjY291bnRzLmxpc3QoKS50aGVuKGhhbmRsZUFjY291bnRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUFjY291bnRzKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnJlc3VsdC5pdGVtcyAmJiByZXNwb25zZS5yZXN1bHQuaXRlbXMubGVuZ3RoKSB7XG4gICAgICByZXNwb25zZS5yZXN1bHQuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihhY2NvdW50KSB7XG4gICAgICAgICQoJy5nb29nbGUtYW5hbHl0aWNzLWFjY291bnRzJykuYXBwZW5kKCQoJzxvcHRpb24gLz4nLCB7dGV4dDogYWNjb3VudC5uYW1lLCB2YWx1ZTogYWNjb3VudC5pZH0pKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnTm8gYWNjb3VudHMgZm91bmQgZm9yIHRoaXMgdXNlci4nKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBxdWVyeVByb3BlcnRpZXMoYWNjb3VudElkKSB7XG4gICAgZ2FwaS5jbGllbnQuYW5hbHl0aWNzLm1hbmFnZW1lbnQud2VicHJvcGVydGllcy5saXN0KFxuICAgICAgICB7J2FjY291bnRJZCc6IGFjY291bnRJZH0pXG4gICAgICAudGhlbihoYW5kbGVQcm9wZXJ0aWVzKVxuICAgICAgLnRoZW4obnVsbCwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVQcm9wZXJ0aWVzKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnJlc3VsdC5pdGVtcyAmJiByZXNwb25zZS5yZXN1bHQuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAkKCcuZ29vZ2xlLWFuYWx5dGljcy1wcm9wZXJ0aWVzJykuaHRtbCgkKCc8b3B0aW9uIGRpc2FibGVkIHNlbGVjdGVkLz4nKSk7XG4gICAgICByZXNwb25zZS5yZXN1bHQuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihhY2NvdW50KSB7XG4gICAgICAgICQoJy5nb29nbGUtYW5hbHl0aWNzLXByb3BlcnRpZXMnKS5hcHBlbmQoJCgnPG9wdGlvbiAvPicsIHt0ZXh0OiBhY2NvdW50Lm5hbWUsIHZhbHVlOiBhY2NvdW50LmlkfSkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdObyBwcm9wZXJ0aWVzIGZvdW5kIGZvciB0aGlzIHVzZXIuJyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcXVlcnlQcm9maWxlcyhhY2NvdW50SWQsIHByb3BlcnR5SWQpIHtcbiAgICBnYXBpLmNsaWVudC5hbmFseXRpY3MubWFuYWdlbWVudC5wcm9maWxlcy5saXN0KHtcbiAgICAgICAgJ2FjY291bnRJZCc6IGFjY291bnRJZCxcbiAgICAgICAgJ3dlYlByb3BlcnR5SWQnOiBwcm9wZXJ0eUlkXG4gICAgfSlcbiAgICAudGhlbihoYW5kbGVQcm9maWxlcylcbiAgICAudGhlbihudWxsLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVzKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnJlc3VsdC5pdGVtcyAmJiByZXNwb25zZS5yZXN1bHQuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAkKCcuZ29vZ2xlLWFuYWx5dGljcy1wcm9maWxlcycpLmh0bWwoJCgnPG9wdGlvbiBkaXNhYmxlZCBzZWxlY3RlZC8+JykpO1xuICAgICAgcmVzcG9uc2UucmVzdWx0Lml0ZW1zLmZvckVhY2goZnVuY3Rpb24oYWNjb3VudCkge1xuICAgICAgICAkKCcuZ29vZ2xlLWFuYWx5dGljcy1wcm9maWxlcycpLmFwcGVuZCgkKCc8b3B0aW9uIC8+Jywge3RleHQ6IGFjY291bnQubmFtZSwgdmFsdWU6IGFjY291bnQuaWR9KSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coJ05vIHZpZXdzIChwcm9maWxlcykgZm91bmQgZm9yIHRoaXMgdXNlci4nKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBxdWVyeUNvcmVSZXBvcnRpbmdBcGkocHJvZmlsZUlkKSB7XG4gICAgZ2FwaS5jbGllbnQuYW5hbHl0aWNzLmRhdGEuZ2EuZ2V0KHtcbiAgICAgICdpZHMnOiAnZ2E6JyArIHByb2ZpbGVJZCxcbiAgICAgICdzdGFydC1kYXRlJzogJzMwZGF5c0FnbycsXG4gICAgICAnZW5kLWRhdGUnOiAneWVzdGVyZGF5JyxcbiAgICAgICdtZXRyaWNzJzogJ2dhOnNlc3Npb25zJyxcbiAgICAgICdkaW1lbnNpb25zJzogJ2dhOmJyb3dzZXIsZ2E6b3BlcmF0aW5nU3lzdGVtLGdhOmJyb3dzZXJWZXJzaW9uJyxcbiAgICAgICdzb3J0JzogJy1nYTpzZXNzaW9ucycsXG4gICAgICAnbWF4LXJlc3VsdHMnOiAnMTQnXG4gICAgfSlcbiAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgdmFyIHRvdGFsU2Vzc2lvbnMgPSByZXNwb25zZS5yZXN1bHQudG90YWxzRm9yQWxsUmVzdWx0c1snZ2E6c2Vzc2lvbnMnXTtcbiAgICAgICQoJy5nb29nbGUtdmlzdWFsaXphdGlvbi10YWJsZS10YWJsZSB0Ym9keScpLmh0bWwoJycpO1xuICAgICAgcmVzcG9uc2UucmVzdWx0LnJvd3MuZm9yRWFjaChmdW5jdGlvbihyb3csIGluZGV4KSB7XG4gICAgICAgIHZhciAkdHIgPSBpbmRleCAlIDIgPT09IDEgPyAkKCc8dHIgLz4nLCB7J2NsYXNzJzogJ29kZCd9KSA6ICQoJzx0ciAvPicsIHsnY2xhc3MnOiAnZXZlbid9KTtcbiAgICAgICAgcm93LmZvckVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgaWYgKGluZGV4ID09PSAzKSB7XG4gICAgICAgICAgICB2YWx1ZSA9ICh2YWx1ZS90b3RhbFNlc3Npb25zKjEwMCkudG9GaXhlZCgyKSArICclJztcbiAgICAgICAgICB9XG4gICAgICAgICAgJHRyLmFwcGVuZCgkKCc8dGQgLz4nLCB7J3RleHQnOiB2YWx1ZSwgJ2NsYXNzJzogJ2dhcGktYW5hbHl0aWNzLWRhdGEtY2hhcnQtc3R5bGVzLXRhYmxlLXRkJ30pKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5nb29nbGUtdmlzdWFsaXphdGlvbi10YWJsZS10YWJsZSB0Ym9keScpLmFwcGVuZCgkdHIpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgICAudGhlbihudWxsLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgLy8gTG9nIGFueSBlcnJvcnMuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgYmluZFVJQWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgICQoJy5nb29nbGUtYW5hbHl0aWNzLWF1dGhvcml6ZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgd2luZG93LmF1dGhvcml6ZShldmVudCk7XG4gICAgfSk7XG4gICAgJCgnLmdvb2dsZS1hbmFseXRpY3MtYWNjb3VudHMnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICBxdWVyeVByb3BlcnRpZXMoJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG4gICAgJCgnLmdvb2dsZS1hbmFseXRpY3MtcHJvcGVydGllcycpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhY2NvdW50SWQgPSAkKCcuZ29vZ2xlLWFuYWx5dGljcy1hY2NvdW50cycpLnZhbCgpO1xuICAgICAgdmFyIHByb3BlcnR5SWQgPSAkKCcuZ29vZ2xlLWFuYWx5dGljcy1wcm9wZXJ0aWVzJykudmFsKCk7XG4gICAgICBxdWVyeVByb2ZpbGVzKGFjY291bnRJZCwgcHJvcGVydHlJZCk7XG4gICAgfSk7XG4gICAgJCgnLmdvb2dsZS1hbmFseXRpY3MtcHJvZmlsZXMnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcHJvZmlsZUlkID0gJCgnLmdvb2dsZS1hbmFseXRpY3MtcHJvZmlsZXMnKS52YWwoKTtcbiAgICAgIHF1ZXJ5Q29yZVJlcG9ydGluZ0FwaShwcm9maWxlSWQpO1xuICAgIH0pO1xuICB9O1xuXG4gIEFuYWx5dGljc0ludGVncmF0aW9uLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBiaW5kVUlBY3Rpb25zKCk7XG4gIH07XG5cbn0od2luZG93LkFuYWx5dGljc0ludGVncmF0aW9uID0gd2luZG93LkFuYWx5dGljc0ludGVncmF0aW9uIHx8IHt9LCBqUXVlcnkpKTtcbiIsIihmdW5jdGlvbigpIHtcblxuICBBY2NvcmRpb24uaW5pdCgpO1xuICBBbmFseXRpY3NJbnRlZ3JhdGlvbi5pbml0KCk7XG5cbn0oKSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=